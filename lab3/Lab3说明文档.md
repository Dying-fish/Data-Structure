# Lab3 说明文档

姓名：赵书誉

学号：18307110072



## 中缀转换后缀

#### 支持的操作符

小中大括号，加、减、乘、除、求余、位移，按位与，或，异或以及三角函数，abs，pow，max，min等函数可以用相似方法实现



#### 输入要求

数字与操作符之间有空格，三角函数是例如 sin( 23 - 8 ) 的形式，左右括号与函数内值有空格



#### 思路

1. 获取输入的中缀表达式
2. 用split(" ")将中缀表达式转为字符串组
3. 循环字符串组
   1. 判断是否为空字符串，是则直接跳过
   2. 用正则表达式判断字符串是否为数字（可识别正负，浮点数），若是则直接输出
   3. 判断是否为操作符，若是
      1. 若栈为空或栈顶为左括号或当前操作符优先级大于栈顶操作符时，压入栈内
      2. 否则将栈中元素依次出栈入队，直至栈空或遇到左括号或栈顶优先级大于等于当前运算符，最后再将该运算符压入栈中
   4. 判断是否为右括号，若是，将栈中元素不断出栈直至找到相应的左括号或栈空
   5. 判断是否为三角函数，若是，获取函数内的字符串，递归调用自身，将函数内值的中缀表达式转换为后缀表达式，输出函数名
4. 循环结束后将栈中剩余元素出栈入队



#### 截图

![Conversion1](/Screenshot/Conversion1.png)

![Conversion2](/Screenshot/Conversion2.png)



## 后缀表达式求值

#### 支持的操作符

同上，但存在一定缺陷（除了调用三角函数以外，只能用整型数据）



#### 输入要求

数字与操作符之间有空格



#### 思路

1. 获取输入的后缀表达式
2. 用split(" ")将后缀表达式转为字符串组
3. 循环字符串组
   1. 用正则表达式判断字符串是否为数字（可识别正负，浮点数），若是则压入栈内
   2. 判断是否为运算符 ~ ，是则取栈顶元素进行~操作后再压入栈内
   3. 判断是否为函数，若是则取栈顶元素进行对应操作，将值压入栈内
   4. 设置整型变量arg1，存储栈顶元素，设置整型变量arg2，存储下一个栈顶元素，用switch判断进行什么操作，最终将值压入栈内
4. 循环结束后将栈中数字出栈输出



#### 截图

![Evaluation1](/Screenshot/Evaluation1.png)

![Evaluation2](/Screenshot/Evaluation2.png)